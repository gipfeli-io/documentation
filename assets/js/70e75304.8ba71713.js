"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[8382],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=o.createContext({}),p=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return o.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(n),h=a,m=u["".concat(l,".").concat(h)]||u[h]||d[h]||r;return n?o.createElement(m,i(i({ref:t},c),{},{components:n})):o.createElement(m,i({ref:t},c))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var p=2;p<r;p++)i[p]=n[p];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},3114:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var o=n(7462),a=(n(7294),n(3905));n(8209);const r={id:"general",sidebar_position:1,title:"General"},i=void 0,s={unversionedId:"architecture/frontend/general",id:"architecture/frontend/general",title:"General",description:"Since we're using React, there is no clear-cut MVC structure such as with Angular. In recent version, React fully",source:"@site/docs/architecture/frontend/general.md",sourceDirName:"architecture/frontend",slug:"/architecture/frontend/general",permalink:"/docs/architecture/frontend/general",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{id:"general",sidebar_position:1,title:"General"},sidebar:"tutorialSidebar",previous:{title:"API Architecture",permalink:"/docs/architecture/api-architecture"},next:{title:"Offline Support",permalink:"/docs/architecture/frontend/offline-support"}},l={},p=[{value:"Overview",id:"overview",level:2},{value:"Components",id:"components",level:2},{value:"Pages",id:"pages",level:3},{value:"ReactComponents",id:"reactcomponents",level:3},{value:"Providers",id:"providers",level:3},{value:"Hooks",id:"hooks",level:2},{value:"Services",id:"services",level:2},{value:"Context",id:"context",level:2},{value:"Hooks, Context and Providers explained",id:"hooks-context-and-providers-explained",level:2}],c={toc:p};function d(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Since we're using React, there is no clear-cut MVC structure such as with Angular. In recent version, React fully\nembraces the functional paradigm in\nrecommending ",(0,a.kt)("a",{parentName:"p",href:"https://reactjs.org/docs/components-and-props.html#function-and-class-components"},"functional components"),"\nand using the powerful ",(0,a.kt)("a",{parentName:"p",href:"https://reactjs.org/docs/hooks-intro.html"},"hooks"),". However, we still decided to have some kind\nof structure to increase readability and maintainability."),(0,a.kt)("admonition",{title:"Where is next.js!?",type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Initially, the project started with ",(0,a.kt)("a",{parentName:"p",href:"https://nextjs.org/"},"next.js"),". However, we came to realize that it was the wrong\ntool for our project and added unnecessary overhead. The decision was taken in agreement with Tobias\nduring ",(0,a.kt)("a",{parentName:"p",href:"/meeting-notes/development-meeting-4"},"development meeting 4"),". The main work was done\nin ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/gipfeli-io/gipfeli-frontend/pull/36"},"merge request #36"),". For those interested, the last version\nusing next.js can be found in the\n",(0,a.kt)("a",{parentName:"p",href:"https://github.com/gipfeli-io/gipfeli-frontend/tree/deprecated/nextjs-base"},(0,a.kt)("inlineCode",{parentName:"a"},"deprecated/nextjs-base"))," branch.")),(0,a.kt)("img",{src:"https://www.plantuml.com/plantuml/png/TP312eD034Jl-OhWlNv24RpqMEnnyR2iGSIwaMoKGkc_Trq5YzBhpBoPa2Ae5Ps69u2vCVUXnZo_eYdPAxqqr02ZTRrj2REIXv4zUGqPlW7Ht8NdhY4vGuWLMQSLJqg2bnYD3KatoTYhDdJTJgKfkQh7xD7Vg0-O1ydSkMK2JcVjtf_n7nWAyarynnS0",alt:"Overall"}),(0,a.kt)("p",null,"The above components are the essential building blocks of our frontend."),(0,a.kt)("h2",{id:"overview"},"Overview"),(0,a.kt)("p",null,"A React app consists of a tree of components. The actual components are rendered depending on the current state of the\napplication. In order to be able to handle routing, we are using the  ",(0,a.kt)("a",{parentName:"p",href:"https://reactrouter.com/"},"ReactRouter")," library.\nThis application consists of components that are used to define which components should be rendered when a user accesses\na given page. As such, this library can be seen as something like the entry point to our frontend."),(0,a.kt)("p",null,"Since ReactRouter has very powerful nesting features, it also allows defining layouts that span across multiple pages\nusing its ",(0,a.kt)("inlineCode",{parentName:"p"},"<Outlet />")," component."),(0,a.kt)("admonition",{title:"Example",type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"As an example, all our routes are nested within a ",(0,a.kt)("inlineCode",{parentName:"p"},'<Route path="/" element={<MainLayout/>}>')," component, which uses\na ",(0,a.kt)("inlineCode",{parentName:"p"},"<MainLayout />")," component. This component defines some global styling that apply for all pages in our app.")),(0,a.kt)("h2",{id:"components"},"Components"),(0,a.kt)("p",null,"Components are React components and can be divided in 3 subgroups."),(0,a.kt)("h3",{id:"pages"},"Pages"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Pages")," are special kinds of components that define a page that is accessible via a URL through ReactRouter. A ",(0,a.kt)("inlineCode",{parentName:"p"},"Page"),"\nhandles the choice of components for its functionality as well as data fetching on a global (read: page-wide) scale. It\nuses various ",(0,a.kt)("inlineCode",{parentName:"p"},"ReactComponents"),", both custom as well as visual ones from the Material UI library."),(0,a.kt)("admonition",{title:"Example",type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"The following code renders the ",(0,a.kt)("inlineCode",{parentName:"p"},"<Login />")," page component, nested inside its ",(0,a.kt)("inlineCode",{parentName:"p"},"<AuthPageLayout />"),' and maps to the path "\nhost.name/login".'),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},'<Route path="/" element={<AuthPageLayout/>}>\n    <Route path="login" element={<Login/>}/>\n</Route>\n'))),(0,a.kt)("h3",{id:"reactcomponents"},"ReactComponents"),(0,a.kt)("p",null,"React apps are composed of subcomponents which serve display purposes and functionalities. An example is\na ",(0,a.kt)("inlineCode",{parentName:"p"},"<TourForm />")," component which serves as the host component for realizing our tour form. It is composed of several\nsubcomponents and has different functions."),(0,a.kt)("p",null,"They can access ",(0,a.kt)("inlineCode",{parentName:"p"},"Services")," when they need to fetch data from sources such as an API or local storage, and they may also\nuse ",(0,a.kt)("inlineCode",{parentName:"p"},"Hooks")," (see below)."),(0,a.kt)("h3",{id:"providers"},"Providers"),(0,a.kt)("p",null,"These are special components since they realize\na ",(0,a.kt)("a",{parentName:"p",href:"https://reactjs.org/docs/context.html#contextprovider"},"ContextProvider"),". Their purpose is to wrap its children inside\na context that provides the children with global functionalities, removing the need to pass down functional properties\nin a deeply nested component tree. See below for more information."),(0,a.kt)("p",null,"As such, they can also use ",(0,a.kt)("inlineCode",{parentName:"p"},"Services")," if they require things from data sources."),(0,a.kt)("h2",{id:"hooks"},"Hooks"),(0,a.kt)("p",null,"These are a recent React feature that allows to use things that were previously only usable in class components, such as\nstate. Besides the ",(0,a.kt)("a",{parentName:"p",href:"https://reactjs.org/docs/hooks-reference.html"},"official hooks"),", we also added custom hooks, which\ncan be used by our ",(0,a.kt)("inlineCode",{parentName:"p"},"Components"),"."),(0,a.kt)("p",null,"They can use ",(0,a.kt)("inlineCode",{parentName:"p"},"Services")," and also reference ",(0,a.kt)("inlineCode",{parentName:"p"},"Contexts")),(0,a.kt)("h2",{id:"services"},"Services"),(0,a.kt)("p",null,"These are standard services that are used to fetch data from any kind of source - localstorage, API, etc."),(0,a.kt)("h2",{id:"context"},"Context"),(0,a.kt)("p",null,"A context defines an interface that is provided by a provider and consumed by a consumer. See below."),(0,a.kt)("h2",{id:"hooks-context-and-providers-explained"},"Hooks, Context and Providers explained"),(0,a.kt)("p",null,"We use these features to implement large-scale contexts. We also have smaller contexts (e.g. a ",(0,a.kt)("inlineCode",{parentName:"p"},"MapContext"),") that are\nused within a contained environment, such as a group of components (e.g. the ",(0,a.kt)("inlineCode",{parentName:"p"},"Map")," component). These work in a similar\nway, but can be simplified without hooks and external providers."),(0,a.kt)("p",null,"We have the following contexts:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"ThemeContext"),": Used to retrieve, set and store the user's preference for darkmode or lightmode"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"AuthenticationContext"),": Used to store the user's login state"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"NotificationContext"),": Used to display notifications that can be triggered by any component in the tree")),(0,a.kt)("p",null,"The way we implemented these features is as follows:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("inlineCode",{parentName:"li"},"Context")," defines its interface, specifying which props it has (which can be values or functions)"),(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("inlineCode",{parentName:"li"},"Provider")," is an actual implementation of a ",(0,a.kt)("inlineCode",{parentName:"li"},"Context")," which returns a ",(0,a.kt)("inlineCode",{parentName:"li"},"ContextProvider")," with the interface\nimplementation. It wraps around all the child components it gets passed as props."),(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("inlineCode",{parentName:"li"},"Hook")," basically just returns ",(0,a.kt)("inlineCode",{parentName:"li"},"useContext")," and can be used by components requiring the ",(0,a.kt)("inlineCode",{parentName:"li"},"Context"),".")),(0,a.kt)("p",null,"Using this pattern, the components do not need to know anything about the implementation of the context, since that is\ndelegated fully to the ",(0,a.kt)("inlineCode",{parentName:"p"},"Provider"),". Just using the ",(0,a.kt)("inlineCode",{parentName:"p"},"Hook")," is enough to access the ",(0,a.kt)("inlineCode",{parentName:"p"},"Context"),"."))}d.isMDXComponent=!0},8209:(e,t,n)=>{n(7294)}}]);