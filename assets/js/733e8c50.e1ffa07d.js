"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[5994],{9092:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>u,contentTitle:()=>s,default:()=>c,frontMatter:()=>i,metadata:()=>r,toc:()=>d});var n=o(7462),a=(o(7294),o(3905));o(1839);const i={id:"documentation-deployment",sidebar_position:4,title:"Documentation deployment"},s=void 0,r={unversionedId:"infrastructure/documentation-deployment",id:"infrastructure/documentation-deployment",title:"Documentation deployment",description:"Our documentation is created with Docusaurus. As this allows for",source:"@site/docs/infrastructure/documentation-deployment.md",sourceDirName:"infrastructure",slug:"/infrastructure/documentation-deployment",permalink:"/docs/infrastructure/documentation-deployment",draft:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{id:"documentation-deployment",sidebar_position:4,title:"Documentation deployment"},sidebar:"tutorialSidebar",previous:{title:"Backend deployment",permalink:"/docs/infrastructure/backend-deployment"},next:{title:"Basics",permalink:"/docs/design/basics"}},u={},d=[{value:"Deployment steps",id:"deployment-steps",level:2}],p={toc:d};function c(e){let{components:t,...o}=e;return(0,a.kt)("wrapper",(0,n.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Our ",(0,a.kt)("a",{parentName:"p",href:"https://docs.gipfeli.io"},"documentation")," is created with ",(0,a.kt)("a",{parentName:"p",href:"https://docusaurus.io/"},"Docusaurus"),". As this allows for\nstatic page rendering, we use ",(0,a.kt)("a",{parentName:"p",href:"https://pages.github.com/"},"GitHub Pages")," to host the documentation for free."),(0,a.kt)("h2",{id:"deployment-steps"},"Deployment steps"),(0,a.kt)("p",null,"Deployment always happens when a push is sent to main. This triggers\nthe ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/gipfeli-io/documentation/blob/main/.github/workflows/deploy.yml"},"GitHub Action")," that performs\nthe following steps:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Setup a node environment"),(0,a.kt)("li",{parentName:"ol"},"Install dependencies and create a static build which creates the HTML markup from the Markdown content"),(0,a.kt)("li",{parentName:"ol"},"Since we're using our custom subdomain instead of the default GitHub page subdomain, we have to inject a CNAME\ntextfile that contains the subdomain we're using. This is required by GitHub Pages to setup the routing correctly.\nBecause we're always rebuilding the project with every push, this has to be added in the build step rather than the\nrepository."),(0,a.kt)("li",{parentName:"ol"},"In the final step, we use the ",(0,a.kt)("a",{parentName:"li",href:"https://github.com/peaceiris/actions-gh-pages"},(0,a.kt)("inlineCode",{parentName:"a"},"peaceiris/actions-gh-pages@v3"))," action\nthat takes our build and pushes it to the ",(0,a.kt)("inlineCode",{parentName:"li"},"gh-pages")," branch. This is done by a GitHub system account."),(0,a.kt)("li",{parentName:"ol"},"Finally, because we've set up our project for GitHub Pages and defined ",(0,a.kt)("inlineCode",{parentName:"li"},"gh-pages")," as the serving branch, our\ndocumentation is live \ud83d\ude80")),(0,a.kt)("p",null,"We also do not have to worry about SSL certificates - GitHub Pages has us covered here and automatically renews the\nLet's Encrypt certificate for us."),(0,a.kt)("admonition",{title:"DNS configuration",type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"In order for this all to work, the domain had to be configured with both a CNAME record for the subdomain that points to\nthe GitHub Pages subdomain of our organization. In order for GitHub Pages to securely verify that we own the domain, we\nalso had to add a specific TXT record to our DNS which GitHub uses to periodically verify that we are the owners.")))}c.isMDXComponent=!0}}]);