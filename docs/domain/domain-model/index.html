<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-domain/domain-model">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Domain Model | gipfeli.io</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://www.gipfeli.io/docs/domain/domain-model"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Domain Model | gipfeli.io"><meta data-rh="true" name="description" content="This section shows the domain model for the gipfeli.io app and explains its components."><meta data-rh="true" property="og:description" content="This section shows the domain model for the gipfeli.io app and explains its components."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://www.gipfeli.io/docs/domain/domain-model"><link data-rh="true" rel="alternate" href="https://www.gipfeli.io/docs/domain/domain-model" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.gipfeli.io/docs/domain/domain-model" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/meeting-notes/rss.xml" title="gipfeli.io RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/meeting-notes/atom.xml" title="gipfeli.io Atom Feed"><link rel="stylesheet" href="/assets/css/styles.d2de2517.css">
<link rel="preload" href="/assets/js/runtime~main.0c99faf6.js" as="script">
<link rel="preload" href="/assets/js/main.80424383.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="gipfeli.io Docs" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="gipfeli.io Docs" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">gipfeli.io</b></a><a class="navbar__item navbar__link" href="/general/">General</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Technical Docs</a><a class="navbar__item navbar__link" href="/meeting-notes">Recent Meeting Notes</a><a class="navbar__item navbar__link" href="/meeting-notes/archive">Meeting Notes Archive</a></div><div class="navbar__items navbar__items--right"><a href="https://api.gipfeli.io/api" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">API Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/gipfeli-io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current,docs-general-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/setup">Development Setup</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/domain/basics">Domain</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/domain/basics">Basics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/domain/domain-model">Domain Model</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/domain/data-model">Data Model</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/architecture/basics">Architecture</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/infrastructure/basics">Infrastructure</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/design/requirements">Design</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/guidelines/branching-strategy">Guidelines</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Domain</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Domain Model</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Domain Model</h1></header><p>This section shows the domain model for the gipfeli.io app and explains its components.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Note that this does not represent the data model directly, but rather the abstract domain. This means that not all
classes are represented as designed below or have the exact methods - for example, the <code>Role</code> can also be expressed as
an Enum field on the <code>User</code> table itself. Furthermore, more attributes might exist, which are not relevant for the
domain model here. For the exact data model, see <a href="/docs/domain/data-model">its documentation</a>.</p><p>Since we&#x27;re also providing an
offline functionality, some of the attributes might not be present at all times. If you for example create a tour while
in an offline state, the <code>Tour</code> entity might temporarily not have any waypoints, because they can only be added later on
when the tour is synchronized.</p></div></div><img loading="lazy" src="https://www.plantuml.com/plantuml/png/PL9DJyCm3BttLqGzZKchW6F5OH87j1j2c-3gDQQBo4ULkA1gxB_Zf4jRZLFjlEVt_Ank0u6dtkYYqH22E0Jqubm8WGQKvc_7hp_EIovRfBthVLZTpSrAoTWr7e4mFSGMfQAfaQXnmYx5rUZDQOm-5WponpY9dYMYVrZoubnQY1HfJ7AXyQeZvUnolMdWcLLQvuTvXY4u1lBGa9XJ7ZhjG2Pf5TC5SXvQt4cqf3uL-bboPnWGvykrVNdzsBFOrtaYlCFGEMKfYcbWrrx6LRMpxLXFp3mRrOfqxFAX59kDADTbobeBwPhUy18X4nZP95gyMIqK0-ag2OX8LN6LSzVYYD4u27APoBFhqI95gOM1GJJE4YXR56EyaSIi-whYCaSQkIVunXknnoNd1E467bLot1l7nVsVVjapRV3lDGyl3vL2pCJ5Tbkqal_ZFm00" alt="Domain" class="img_ev3q"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="user"><code>User</code><a class="hash-link" href="#user" title="Direct link to heading">​</a></h2><p>This is the basic entity that interacts with the application. It has a <code>username</code> and a <code>password</code> used for
authenticating and referencing any given user. The user performs the CRUD operations for the <code>Tour</code> objects they
document. Additionally, each user has at least one <code>Role</code> assigned that governs what they are able to do. Lastly,
a <code>User</code> might have some <code>UserUploads</code> which are used within a <code>Tour</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="role"><code>Role</code><a class="hash-link" href="#role" title="Direct link to heading">​</a></h2><p>Since the application also needs some kind of moderation, each <code>User</code> has exactly one <code>Role</code> attached. The
default <code>Role</code> is identifying any <code>User</code> as normal user, allowing them to use the application for managing their
<code>Tours</code>. Moderating users have the role <code>administrator</code> which gives them the ability to <code>moderateUsers</code>,
meaning that they can e.g. delete <code>Users</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tour"><code>Tour</code><a class="hash-link" href="#tour" title="Direct link to heading">​</a></h2><p>This is the main entity that the website is about and represents a <code>Tour</code> that any given <code>User</code> has documented. It has
several attributes relating to the description of the <code>Tour</code> itself and is always associated with exactly one <code>User</code> and
deleted when its owning <code>User</code> is removed. It
may also contain one or more <code>Image</code> objects and/or exactly 1 <code>GPXTrack</code>. It always consists of 2 <code>Waypoint</code> objects (
start/endpoint).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tourcategory"><code>TourCategory</code><a class="hash-link" href="#tourcategory" title="Direct link to heading">​</a></h2><p>Each <code>Tour</code> is assigned to at least one <code>TourCategory</code>, though a <code>Tour</code> might also have several <code>TourCategories</code> (e.g.
alpine hike + climbing). <code>TourCategories</code> are managed application-wide and can be used by all <code>Users</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="userupload"><code>UserUpload</code><a class="hash-link" href="#userupload" title="Direct link to heading">​</a></h2><p>This is an abstract entity that refers to any upload a given <code>User</code> has performed. It has an ID which uniquely
identifies any <code>UserUpload</code>. Any <code>UserUpload</code> is removed if its owning user is removed. It also needs to keep track of
how it is identified in the storage used in the application (e.g. the filename within a given storage).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="image"><code>Image</code><a class="hash-link" href="#image" title="Direct link to heading">​</a></h2><p>A <code>Image</code> is a <code>UserUpload</code> and can be added to any <code>Tour</code>. When the <code>Tour</code> object is deleted, the associated <code>Image</code>
objects are removed as
well - they cannot exist without a <code>Tour</code>. An <code>Image</code> might also have a <code>Waypoint</code> when it has GPS tags enabled during
its caption, allowing its location to be displayed on the map.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="gpxtrack"><code>GPXTrack</code><a class="hash-link" href="#gpxtrack" title="Direct link to heading">​</a></h2><p>A <code>GPXTrack</code> is a <code>UserUpload</code> and can be added to any <code>Tour</code>. When the <code>Tour</code> object is deleted, the
associated <code>GPXTrack</code>
object is removed as
well - it cannot exist without a <code>Tour</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="waypoint"><code>Waypoint</code><a class="hash-link" href="#waypoint" title="Direct link to heading">​</a></h2><p>A <code>Waypoint</code> defines any geographical location by a pair of coordinates.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/domain/basics"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Basics</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/domain/data-model"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Data Model</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#user" class="table-of-contents__link toc-highlight"><code>User</code></a></li><li><a href="#role" class="table-of-contents__link toc-highlight"><code>Role</code></a></li><li><a href="#tour" class="table-of-contents__link toc-highlight"><code>Tour</code></a></li><li><a href="#tourcategory" class="table-of-contents__link toc-highlight"><code>TourCategory</code></a></li><li><a href="#userupload" class="table-of-contents__link toc-highlight"><code>UserUpload</code></a></li><li><a href="#image" class="table-of-contents__link toc-highlight"><code>Image</code></a></li><li><a href="#gpxtrack" class="table-of-contents__link toc-highlight"><code>GPXTrack</code></a></li><li><a href="#waypoint" class="table-of-contents__link toc-highlight"><code>Waypoint</code></a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 gipfeli.io<br>Built with <a href="https://docusaurus.io/" title="Docusaurus">Docusaurus</a> | Illustrations by <a href="https://undraw.co/" title="Undraw">unDraw</a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.0c99faf6.js"></script>
<script src="/assets/js/main.80424383.js"></script>
</body>
</html>