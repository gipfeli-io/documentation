<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-general docs-doc-id-lessons-learned">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.20">
<link rel="alternate" type="application/rss+xml" href="/meeting-notes/rss.xml" title="gipfeli.io RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/meeting-notes/atom.xml" title="gipfeli.io Atom Feed"><title data-rh="true">Lessons learned | gipfeli.io</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://www.gipfeli.io/general/lessons-learned"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-general-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-general-current"><meta data-rh="true" property="og:title" content="Lessons learned | gipfeli.io"><meta data-rh="true" name="description" content="In this section, we keep track of lessons learned. The goal is to have a list that shows what problems we were facing"><meta data-rh="true" property="og:description" content="In this section, we keep track of lessons learned. The goal is to have a list that shows what problems we were facing"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://www.gipfeli.io/general/lessons-learned"><link data-rh="true" rel="alternate" href="https://www.gipfeli.io/general/lessons-learned" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.gipfeli.io/general/lessons-learned" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.2e605fa9.css">
<link rel="preload" href="/assets/js/runtime~main.59af0695.js" as="script">
<link rel="preload" href="/assets/js/main.b6e43967.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="gipfeli.io Docs" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.svg" alt="gipfeli.io Docs" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title text--truncate">gipfeli.io</b></a><a class="navbar__item navbar__link navbar__link--active" href="/general/">General</a><a class="navbar__item navbar__link" href="/docs/">Technical Docs</a><a class="navbar__item navbar__link" href="/meeting-notes">Recent Meeting Notes</a><a class="navbar__item navbar__link" href="/meeting-notes/archive">Meeting Notes Archive</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/gipfeli-io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_dLyj"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current,docs-general-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_mKqt"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><div class="docPage_ualW"><aside class="theme-doc-sidebar-container docSidebarContainer_UQUJ"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/general/">Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/general/organization">Organization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/general/definition-of-done">Definition of done</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/general/milestones-planning">Milestones and planning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/general/decision-log">Decision log</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/general/lessons-learned">Lessons learned</a></li></ul></nav></div></aside><main class="docMainContainer_uL0j"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_kU5B"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Lessons learned</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_bZGK theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_l22C">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Lessons learned</h1></header><p>In this section, we keep track of lessons learned. The goal is to have a list that shows what problems we were facing
and how we solved them or what implications they had on the project.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="organisation">Organisation<a class="hash-link" href="#organisation" title="Direct link to heading">​</a></h2><ul><li><strong>TBD</strong>:</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="frontend">Frontend<a class="hash-link" href="#frontend" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="nextjs">next.js<a class="hash-link" href="#nextjs" title="Direct link to heading">​</a></h3><ul><li><strong>next-auth:</strong> We use <a href="https://next-auth.js.org/" target="_blank" rel="noopener noreferrer">next-auth</a> as our authentication framework. It was chosen because of
its seamless integration into <code>next.js</code>. However, we had to realize that it only works as seamlessly as advertised if
you use the API capabilities of <code>next.js</code> itself. Since we&#x27;re building our API as a separate service, integration is
rather difficult and the documentation does not provide much help. Furthermore, since the <code>Credentials</code> provider is
disencouraged by the authors, a lot of customization has to be made. As we&#x27;re using <code>JWT</code> as authentication strategy,
it could be simpler to just build the authorization flow from scratch.</li><li><strong>Dropping next.js in favor of pure React:</strong> The most important lesson that we learned was that next.js was the wrong
tool for what we had in mind. Since we are developing an application that does not require any SEO optimization, the
whole point of having <code>getServerSideProps</code> is void. Apart from that, we had more troubles than benefits in using
next.js in our setup (see above) and we found its documentation to be rather clumsy, especially with regards to the
typescript part. Lots of things that were easily doable with plain React required workarounds. Since one of our goals
was also to have an offline part, we decided it would be best to just use plain React. Because next.js is a wrapper
around React, we were able to create a React app from scratch and move all of our existing code to it, which worked
quite well.</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="backend">Backend<a class="hash-link" href="#backend" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="nestjs">nest.js<a class="hash-link" href="#nestjs" title="Direct link to heading">​</a></h3><ul><li><strong>TBD:</strong></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="google-cloud-platform">Google Cloud Platform<a class="hash-link" href="#google-cloud-platform" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="general">General<a class="hash-link" href="#general" title="Direct link to heading">​</a></h3><ul><li><strong>Pricing:</strong> While the GCP offerings seem to be very cheap, the costs can mount up quickly. For example, just using
Cloud Run costs do not mirror the fact that you also have to pay for some sort of container registry, which in turn
uses other GCP services such as Cloud Storage. On the other hand, configuring services is not at all straightforward
and each setting may incur further costs. This is especially prevalent in the CloudSQL offerings, since
the <a href="https://cloud.google.com/products/calculator#id=" target="_blank" rel="noopener noreferrer">price calculator</a> does not necessarily mirror each setting
correctly.</li><li><strong>Usage of the Cloud Console:</strong> Especially in terms of IAM settings, the Cloud Console is very difficult and at times
counter-intuitive to use. Our IAM settings are very basic and we kept to the Google Recommendations or standard
settings. However, this part could be optimized, yet would require a significant investment in understanding the inner
workings of the Cloud Platform which goes beyond mere devops skills.</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="cloudsql">CloudSQL<a class="hash-link" href="#cloudsql" title="Direct link to heading">​</a></h3><ul><li><strong>Connections:</strong> Connection to CloudSQL instances was not that simple as it is made believe by the many tutorials out
there.</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="cloud-run">Cloud Run<a class="hash-link" href="#cloud-run" title="Direct link to heading">​</a></h3><ul><li><strong>Custom domains:</strong> While setting up Cloud Run instance is incredibly simple, configuring a custom domain is rather
difficult and, depending on the service location, requires custom load balancers which in turn incur additional
monthly costs. This was, among others, the reason why we chose to keep our service on Belgian servers.</li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/general/decision-log"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Decision log</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#organisation" class="table-of-contents__link toc-highlight">Organisation</a></li><li><a href="#frontend" class="table-of-contents__link toc-highlight">Frontend</a><ul><li><a href="#nextjs" class="table-of-contents__link toc-highlight">next.js</a></li></ul></li><li><a href="#backend" class="table-of-contents__link toc-highlight">Backend</a><ul><li><a href="#nestjs" class="table-of-contents__link toc-highlight">nest.js</a></li></ul></li><li><a href="#google-cloud-platform" class="table-of-contents__link toc-highlight">Google Cloud Platform</a><ul><li><a href="#general" class="table-of-contents__link toc-highlight">General</a></li><li><a href="#cloudsql" class="table-of-contents__link toc-highlight">CloudSQL</a></li><li><a href="#cloud-run" class="table-of-contents__link toc-highlight">Cloud Run</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 gipfeli.io<br>Built with <a href="https://docusaurus.io/" title="Docusaurus">Docusaurus</a> | Illustrations by <a href="https://undraw.co/" title="Undraw">unDraw</a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.59af0695.js"></script>
<script src="/assets/js/main.b6e43967.js"></script>
</body>
</html>